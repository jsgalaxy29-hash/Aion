@using Aion.AppHost.Services
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.FluentUI.AspNetCore.Components
@using Microsoft.FluentUI.AspNetCore.Components.Icons
@inherits LayoutComponentBase
@inject IAionThemeService ThemeService

<HeadContent>
    <!-- 1) bundle des CSS isolées (nom = Assembly du projet host) -->
    <link rel="stylesheet" href="Aion.AppHost.styles.css" />

    <!-- 2) reboot Fluent (optionnel mais utile) -->
    <link rel="stylesheet" href="_content/Microsoft.FluentUI.AspNetCore.Components/css/reboot.css" />
</HeadContent>

<FluentProvider Theme="@(ThemeService.Current)">
    <CascadingAuthenticationState>
        <main class="page" style="min-height:100vh;display:flex;flex-direction:column;">
            <div style="display:flex;gap:.5rem;align-items:center;padding:.5rem">
                <FluentButton Appearance="Appearance.Accent" OnClick="() => ThemeSvc.UseLight()">Clair</FluentButton>
                <FluentButton Appearance="Appearance.Outline" OnClick="() => ThemeSvc.UseDark()">Sombre</FluentButton>
                <FluentButton Appearance="Appearance.Stealth" OnClick='() => ThemeSvc.SetAccent("#0D3B66", "#D4AF37")'>
                    Aion
                </FluentButton>
                <FluentAnchor Href="/dashboard">Dashboard</FluentAnchor>
                <FluentAnchor Href="/login">Login</FluentAnchor>
            </div>

            <div style="margin:1rem">
                @Body
            </div>
        </main>
        <FluentDialogProvider />
        <FluentToastProvider />
    </CascadingAuthenticationState>
</FluentProvider>



@code {
    [Microsoft.AspNetCore.Components.Inject] Aion.AppHost.Services.IAionThemeService ThemeSvc { get; set; } = default!;
}
